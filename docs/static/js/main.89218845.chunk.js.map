{"version":3,"sources":["components/DoomFire/fireColorsPalette.ts","components/DoomFire/styles.ts","components/DoomFire/index.tsx","theme/GlobalStyles.ts","App.tsx","index.tsx"],"names":["fireColorsPalette","Container","styled","section","Table","table","TableData","td","Pixel","props","bg","PixelIndex","span","DoomFire","fireWidth","fireHeight","debug","forceUpdate","useState","count","setCount","increment","prevCount","useForceUpdate","Array","from","length","firePixelsArray","setFirePixelsArray","_","i","fireWithArray","fireHeightArray","createFireIntensityPerPixel","useCallback","currentPixelIndex","belowPixelIndex","decay","Math","random","intensityDecay","indexArray","oldArr","newArr","calculateFirePropagation","column","row","setTimeout","createFireSource","overflowPixelIndex","pixelIndex","renderFire","map","rowsColumns","pixelIntensity","colorString","start","useEffect","GlobalStyle","createGlobalStyle","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.89218845.chunk.js","sourcesContent":["export const fireColorsPalette = [\n  '7, 7, 7',\n  '31, 7, 7',\n  '47, 15, 7',\n  '71, 15, 7',\n  '87, 23, 7',\n  '103, 31, 7',\n  '119, 31, 7',\n  '143, 39, 7',\n  '159, 47, 7',\n  '175, 63, 7',\n  '191, 71, 7',\n  '199, 71, 7',\n  '223, 79, 7',\n  '223, 87, 7',\n  '223, 87, 7',\n  '215, 95, 7',\n  '215, 95, 7',\n  '215, 103, 15',\n  '207, 111, 15',\n  '207, 119, 15',\n  '207, 127, 15',\n  '207, 135, 23',\n  '199, 135, 23',\n  '199, 143, 23',\n  '199, 151, 31',\n  '191, 159, 31',\n  '191, 159, 31',\n  '191, 167, 39',\n  '191, 167, 39',\n  '191, 175, 47',\n  '183, 175, 47',\n  '183, 183, 47',\n  '183, 183, 55',\n  '207, 207, 111',\n  '223, 223, 159',\n  '239, 239, 199',\n  '255, 255, 255',\n]\n","import styled from 'styled-components'\n\nexport const Container = styled.section`\n  display: flex;\n  flex: 1;\n  min-height: 100vh;\n  justify-content: center;\n  align-items: center;\n  background-color: #282a36;\n`\n\nexport const Table = styled.table`\n  border-collapse: collapse;\n  background: #fff;\n\n  box-shadow: 0 2px 20px -10px rgba(0, 0, 0, 1);\n`\n\nexport const TableData = styled.td`\n  width: 50px;\n  height: 50px;\n  border: 1px solid #000;\n  text-align: center;\n  vertical-align: middle;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\n    Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n  font-size: 18px;\n  position: relative;\n`\n\nexport const Pixel = styled(TableData)<{ bg: string }>`\n  background-color: rgb(${props => props.bg});\n  width: 4px;\n  height: 4px;\n  border: 0;\n`\n\nexport const PixelIndex = styled.span`\n  font-size: 10px;\n  display: inline-block;\n  position: absolute;\n  top: 2px;\n  right: 2px;\n  color: #999;\n`\n","import React, { useCallback, useEffect, useState } from 'react'\n\nimport { fireColorsPalette } from './fireColorsPalette'\n\nimport * as S from './styles'\n\ninterface IDoomFireProps {\n  fireWidth?: number\n  fireHeight?: number\n  debug?: boolean\n}\n\nconst useForceUpdate = () => {\n  const [count, setCount] = useState(0)\n\n  const increment = () => {\n    setCount(prevCount => prevCount + 1)\n  }\n  return { increment, count }\n}\n\nconst DoomFire: React.FC<IDoomFireProps> = ({\n  fireWidth = 80,\n  fireHeight = 45,\n  debug = false,\n}) => {\n  const { increment: forceUpdate } = useForceUpdate()\n  const [firePixelsArray, setFirePixelsArray] = useState<number[]>(() =>\n    Array.from({ length: fireWidth * fireHeight }, () => 0)\n  )\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [fireWithArray, setFireWithArray] = useState<number[]>(() =>\n    Array.from({ length: fireWidth }, (_, i) => i)\n  )\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  const [fireHeightArray, setFireHeightArray] = useState<number[]>(() =>\n    Array.from({ length: fireHeight }, (_, i) => i)\n  )\n\n  const createFireIntensityPerPixel = useCallback(\n    (currentPixelIndex: number) => {\n      const belowPixelIndex = currentPixelIndex + fireWidth\n\n      if (belowPixelIndex >= fireHeight * fireWidth) {\n        return\n      }\n\n      const decay = (Math.random() * 4) | 0\n      const intensityDecay = firePixelsArray[belowPixelIndex] - decay\n      const randomIndex = (Math.random() * 2) | 0\n      const indexArray = randomIndex\n        ? currentPixelIndex - decay\n        : currentPixelIndex + decay\n      setFirePixelsArray(oldArr => {\n        const newArr = oldArr\n        newArr[indexArray] = intensityDecay\n        return newArr\n      })\n    },\n    [fireWidth, fireHeight, firePixelsArray]\n  )\n\n  const calculateFirePropagation = useCallback(() => {\n    for (const column of fireWithArray) {\n      for (const row of fireHeightArray) {\n        const pixelIndex = column + fireWidth * row\n\n        createFireIntensityPerPixel(pixelIndex)\n      }\n    }\n\n    setTimeout(forceUpdate, 50)\n  }, [\n    forceUpdate,\n    fireWidth,\n    fireWithArray,\n    fireHeightArray,\n    createFireIntensityPerPixel,\n  ])\n\n  const createFireSource = useCallback(() => {\n    const overflowPixelIndex = fireWidth * fireHeight\n    for (const column of fireWithArray) {\n      const pixelIndex = overflowPixelIndex - fireWidth + column\n\n      setFirePixelsArray(oldArr => {\n        const newArr = oldArr\n        newArr[pixelIndex] = 36\n        return newArr\n      })\n    }\n  }, [fireWidth, fireHeight, fireWithArray])\n\n  const renderFire = fireHeightArray.map(row => {\n    const rowsColumns = fireWithArray.map(column => {\n      const pixelIndex = column + fireWidth * row\n      const pixelIntensity =\n        firePixelsArray[pixelIndex] >= 0 ? firePixelsArray[pixelIndex] : 0\n\n      if (debug) {\n        return (\n          <S.TableData key={`column-${column}`}>\n            <S.PixelIndex>{pixelIndex}</S.PixelIndex>\n            {pixelIntensity}\n          </S.TableData>\n        )\n      }\n\n      const colorString = fireColorsPalette[pixelIntensity]\n\n      return <S.Pixel bg={colorString} key={`column-${column}`} />\n    })\n\n    return <tr key={`row-${row}`}>{rowsColumns}</tr>\n  })\n\n  const start = useCallback(() => {\n    createFireSource()\n    calculateFirePropagation()\n  }, [createFireSource, calculateFirePropagation])\n\n  useEffect(() => {\n    start()\n  }, [start])\n\n  return (\n    <S.Container>\n      <S.Table>\n        <tbody>{renderFire}</tbody>\n      </S.Table>\n    </S.Container>\n  )\n}\n\nexport default DoomFire\n","import { createGlobalStyle } from 'styled-components'\n\nexport const GlobalStyle = createGlobalStyle`\n  * {\n    margin:0;\n    padding:0;\n    box-sizing: border-box;\n    border: 0;\n    text-decoration: none;\n  }\n\n  html, body, #root {\n    font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;\n    height: 100%;\n  }\n`\n","import React from 'react'\nimport DoomFire from './components/DoomFire'\nimport { GlobalStyle } from './theme/GlobalStyles'\n\nconst App: React.FC = () => {\n  return (\n    <main>\n      <GlobalStyle />\n      <DoomFire />\n    </main>\n  )\n}\n\nexport default App\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}